<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>cubiz</title><meta name="description" content="Documentation for cubiz"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">cubiz</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>cubiz</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#cubiz" id="cubiz" style="color: inherit; text-decoration: none;">
  <h1>cubiz</h1>
</a>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<p><strong>npm</strong></p>
<pre><code class="language-bash"><span class="hl-0">npm i cubiz --save</span>
</code></pre>
<p><strong>yarn</strong></p>
<pre><code class="language-bash"><span class="hl-0">yarn add cubiz</span>
</code></pre>
<hr>

<a href="#features" id="features" style="color: inherit; text-decoration: none;">
  <h2>Features</h2>
</a>
<ul>
<li>Simple API</li>
<li>Easy to mainternant</li>
<li>Async cancellation supported</li>
<li>Fully Typescript supported</li>
</ul>
<hr>

<a href="#concepts" id="concepts" style="color: inherit; text-decoration: none;">
  <h2>Concepts</h2>
</a>
<ul>
<li><strong>The Cubiz</strong> is where to store the data of the application. One cubiz contains one kind of data and handle all business logic that relates to that data.</li>
<li><strong>The effect</strong> is where to describes how we can interact with the cubiz. When a effect called, if the effect contains async code, the cubiz loading status becomes true. After the effect is done, if no more running effect, the cubiz loading status becomes false, no matter the effect is sucess or fail.</li>
<li><strong>The Provider</strong> is where to handle cubiz repository, the repository stores all cubiz instances. When cubiz uses another cubiz instance, it calls the repository for resolving that</li>
</ul>
<hr>

<a href="#usages" id="usages" style="color: inherit; text-decoration: none;">
  <h2>Usages</h2>
</a>

<a href="#basic-usages" id="basic-usages" style="color: inherit; text-decoration: none;">
  <h3>Basic Usages</h3>
</a>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">useCubiz</span><span class="hl-0">, </span><span class="hl-2">Provider</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;cubiz&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-4">// define init function of the cubiz</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">CounterCubiz</span><span class="hl-0"> = ({ </span><span class="hl-2">state</span><span class="hl-0"> }) </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">// set initial state of CounterCubiz</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">(</span><span class="hl-7">1</span><span class="hl-0">);</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-4">// define cubiz effect,the effect perform increasing state value by 1</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">increment</span><span class="hl-0"> = ({ </span><span class="hl-2">state</span><span class="hl-0"> }) </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">// get current state</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">count</span><span class="hl-0"> = </span><span class="hl-6">state</span><span class="hl-0">();</span><br/><span class="hl-0">  </span><span class="hl-4">// update state</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">(</span><span class="hl-2">count</span><span class="hl-0"> + </span><span class="hl-7">1</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-4">// can achieve above by using state reducer</span><br/><span class="hl-0">  </span><span class="hl-4">// state((prev) =&gt; prev + 1);</span><br/><span class="hl-0">  </span><span class="hl-4">// state.value++;</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">Counter</span><span class="hl-0"> = () </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">// get cubiz instance from the provider,</span><br/><span class="hl-0">  </span><span class="hl-4">// the cubiz will be created by calling init function</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> { </span><span class="hl-8">state</span><span class="hl-0">, </span><span class="hl-8">call</span><span class="hl-0"> } = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">CounterCubiz</span><span class="hl-0">);</span><br/><br/><span class="hl-0">  </span><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">handleClick</span><span class="hl-0">() {</span><br/><span class="hl-0">    </span><span class="hl-4">// call cubiz effect</span><br/><span class="hl-0">    </span><span class="hl-6">call</span><span class="hl-0">(</span><span class="hl-2">increment</span><span class="hl-0">);</span><br/><span class="hl-0">  }</span><br/><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;&gt;</span><br/><span class="hl-0">      </span><span class="hl-5">{</span><span class="hl-4">/* show state value */</span><span class="hl-5">}</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-10">h1</span><span class="hl-9">&gt;</span><span class="hl-0">Count: </span><span class="hl-5">{</span><span class="hl-2">state</span><span class="hl-5">}</span><span class="hl-9">&lt;/</span><span class="hl-10">h1</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-10">button</span><span class="hl-0"> </span><span class="hl-11">onClick</span><span class="hl-0">=</span><span class="hl-5">{</span><span class="hl-2">handleClick</span><span class="hl-5">}</span><span class="hl-9">&gt;</span><span class="hl-0">Increment</span><span class="hl-9">&lt;/</span><span class="hl-10">button</span><span class="hl-9">&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">App</span><span class="hl-0"> = () </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> (</span><br/><span class="hl-0">    </span><span class="hl-4">// wrap a application inside provider</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;</span><span class="hl-12">Provider</span><span class="hl-9">&gt;</span><br/><span class="hl-0">      </span><span class="hl-9">&lt;</span><span class="hl-12">Counter</span><span class="hl-0"> </span><span class="hl-9">/&gt;</span><br/><span class="hl-0">    </span><span class="hl-9">&lt;/</span><span class="hl-12">Provider</span><span class="hl-9">&gt;</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span>
</code></pre>

<a href="#advanced-usages" id="advanced-usages" style="color: inherit; text-decoration: none;">
  <h3>Advanced Usages</h3>
</a>

<a href="#sharing-effect-with-other-cubiz" id="sharing-effect-with-other-cubiz" style="color: inherit; text-decoration: none;">
  <h4>Sharing effect with other cubiz</h4>
</a>
<pre><code class="language-js"><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">Counter1Cubiz</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">(</span><span class="hl-7">1</span><span class="hl-0">);</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">Counter2Cubiz</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">(</span><span class="hl-7">2</span><span class="hl-0">);</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">increment</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-2">state</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">++;</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">counter1</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">Counter1Cubiz</span><span class="hl-0">);</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">counter2</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">Counter1Cubiz</span><span class="hl-0">);</span><br/><br/><span class="hl-4">// both cubizes can call same effect</span><br/><span class="hl-2">counter1</span><span class="hl-0">.</span><span class="hl-6">call</span><span class="hl-0">(</span><span class="hl-2">increment</span><span class="hl-0">);</span><br/><span class="hl-2">counter2</span><span class="hl-0">.</span><span class="hl-6">call</span><span class="hl-0">(</span><span class="hl-2">increment</span><span class="hl-0">);</span>
</code></pre>

<a href="#using-other-cubiz-instances" id="using-other-cubiz-instances" style="color: inherit; text-decoration: none;">
  <h4>Using other cubiz instances</h4>
</a>
<pre><code class="language-js"><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">SettingsCubiz</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-4">// load settings from somewhere</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">settings</span><span class="hl-0"> = </span><span class="hl-12">JSON</span><span class="hl-0">.</span><span class="hl-6">parse</span><span class="hl-0">(</span><span class="hl-2">localStorage</span><span class="hl-0">.</span><span class="hl-6">getItem</span><span class="hl-0">(</span><span class="hl-3">&quot;settings&quot;</span><span class="hl-0">));</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">(</span><span class="hl-2">settings</span><span class="hl-0">);</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">ThemeCubiz</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0">, </span><span class="hl-2">use</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-4">// use() function returns instance of the cubiz from its initFn</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">settings</span><span class="hl-0"> = </span><span class="hl-6">use</span><span class="hl-0">(</span><span class="hl-2">SettingsCubiz</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">(</span><span class="hl-2">settings</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">.</span><span class="hl-2">theme</span><span class="hl-0">);</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#understanding-cubiz-key" id="understanding-cubiz-key" style="color: inherit; text-decoration: none;">
  <h4>Understanding cubiz key</h4>
</a>
<p>The cubiz is created from the key and initFn, the key is null by default.
So we can have multiple cubizes that has same initFn but they have different keys.
This is useful when you want to sperate data of the cubiz but still want to keep its logic.</p>
<pre><code class="language-js"><span class="hl-5">async</span><span class="hl-0"> </span><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">ArticleCubiz</span><span class="hl-0">({ </span><span class="hl-2">key</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-4">// assume that the key is article id</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">articleId</span><span class="hl-0"> = </span><span class="hl-2">key</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">article</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">call</span><span class="hl-0">(</span><span class="hl-2">loadArticleById</span><span class="hl-0">, </span><span class="hl-2">articleId</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">(</span><span class="hl-2">article</span><span class="hl-0">);</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">article1</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">ArticleCubiz</span><span class="hl-0">, { </span><span class="hl-2">key:</span><span class="hl-0"> </span><span class="hl-7">1</span><span class="hl-0"> });</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">article2</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">ArticleCubiz</span><span class="hl-0">, { </span><span class="hl-2">key:</span><span class="hl-0"> </span><span class="hl-7">2</span><span class="hl-0"> });</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">article1</span><span class="hl-0"> !== </span><span class="hl-2">article2</span><span class="hl-0">);</span><br/><span class="hl-4">// dont need to create ArticleCache to cache all loaded articles</span><br/><span class="hl-4">// mutating article1 does not impact article2 and its connected components</span>
</code></pre>
<p>The cubiz repository uses strict comparison (===) to identify cubiz key,
but you can use array as the key and the repo is smart enough to do comparison for each array item</p>
<pre><code class="language-js"><span class="hl-4">// in javascript, two arrays are difference</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">([</span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">] === [</span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-7">2</span><span class="hl-0">, </span><span class="hl-7">3</span><span class="hl-0">]);</span><br/><span class="hl-4">// but you use array for cubiz key</span><br/><span class="hl-4">// let say we have ProductionListCubiz that contains product list fetching logic</span><br/><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">ProductionListCubiz</span><span class="hl-0">({ </span><span class="hl-2">key</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-4">// the key contains category and orderBy</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> [</span><span class="hl-8">category</span><span class="hl-0">, </span><span class="hl-8">orderBy</span><span class="hl-0">] = </span><span class="hl-2">key</span><span class="hl-0">;</span><br/><span class="hl-0">}</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">list1</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">ProductionListCubiz</span><span class="hl-0">, { </span><span class="hl-2">key:</span><span class="hl-0"> [</span><span class="hl-3">&quot;food&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;name&quot;</span><span class="hl-0">] });</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">list2</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">ProductionListCubiz</span><span class="hl-0">, { </span><span class="hl-2">key:</span><span class="hl-0"> [</span><span class="hl-3">&quot;food&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;name&quot;</span><span class="hl-0">] });</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">list3</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">ProductionListCubiz</span><span class="hl-0">, { </span><span class="hl-2">key:</span><span class="hl-0"> [</span><span class="hl-3">&quot;food&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;date&quot;</span><span class="hl-0">] });</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">list4</span><span class="hl-0"> = </span><span class="hl-6">useCubiz</span><span class="hl-0">(</span><span class="hl-2">ProductionListCubiz</span><span class="hl-0">, { </span><span class="hl-2">key:</span><span class="hl-0"> [</span><span class="hl-3">&quot;gadget&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;date&quot;</span><span class="hl-0">] });</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">list1</span><span class="hl-0"> === </span><span class="hl-2">list2</span><span class="hl-0">); </span><span class="hl-4">// true</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">list2</span><span class="hl-0"> === </span><span class="hl-2">list3</span><span class="hl-0">); </span><span class="hl-4">// false</span>
</code></pre>

<a href="#mutating-state" id="mutating-state" style="color: inherit; text-decoration: none;">
  <h4>Mutating state</h4>
</a>
<p>Probaly, we can use method state(prev =&gt; ...) to mutate state, cubiz provides a lot of mutations you can use for object, array, value etc.</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">mutate</span><span class="hl-0">, </span><span class="hl-2">push</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;cubiz&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">addTodo</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0">, </span><span class="hl-2">call</span><span class="hl-0"> }, </span><span class="hl-2">title</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-4">// using state</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">((</span><span class="hl-2">todos</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> </span><span class="hl-2">todos</span><span class="hl-0">.</span><span class="hl-6">concat</span><span class="hl-0">([{ </span><span class="hl-2">title</span><span class="hl-0"> }]));</span><br/><span class="hl-0">  </span><span class="hl-4">// using mutation</span><br/><span class="hl-0">  </span><span class="hl-6">call</span><span class="hl-0">(</span><span class="hl-2">mutate</span><span class="hl-0">, </span><span class="hl-6">push</span><span class="hl-0">({ </span><span class="hl-2">title</span><span class="hl-0"> }));</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Mutating array</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">mutate</span><span class="hl-0">, </span><span class="hl-2">removeAll</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;cubiz&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">removeTodo</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0">, </span><span class="hl-2">call</span><span class="hl-0"> }, </span><span class="hl-2">id</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">((</span><span class="hl-2">todos</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> </span><span class="hl-2">todos</span><span class="hl-0">.</span><span class="hl-6">filter</span><span class="hl-0">((</span><span class="hl-2">x</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> </span><span class="hl-2">x</span><span class="hl-0">.</span><span class="hl-2">id</span><span class="hl-0"> !== </span><span class="hl-2">id</span><span class="hl-0">)); </span><span class="hl-4">// in case of no todo found, the state is still created</span><br/><span class="hl-0">  </span><span class="hl-6">call</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-2">mutate</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-6">removeAll</span><span class="hl-0">((</span><span class="hl-2">x</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> </span><span class="hl-2">x</span><span class="hl-0">.</span><span class="hl-2">id</span><span class="hl-0"> === </span><span class="hl-2">id</span><span class="hl-0">),</span><br/><span class="hl-0">    </span><span class="hl-4">// mutate item that matches predicate</span><br/><span class="hl-0">    </span><span class="hl-6">item</span><span class="hl-0">((</span><span class="hl-2">x</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> </span><span class="hl-2">x</span><span class="hl-0">.</span><span class="hl-2">id</span><span class="hl-0"> === </span><span class="hl-2">id</span><span class="hl-0">, </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;done&quot;</span><span class="hl-0">, </span><span class="hl-6">toggle</span><span class="hl-0">())),</span><br/><span class="hl-0">    </span><span class="hl-4">// mutate item at specified position</span><br/><span class="hl-0">    </span><span class="hl-6">item</span><span class="hl-0">(</span><span class="hl-7">1</span><span class="hl-0">, </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;new title&quot;</span><span class="hl-0">)),</span><br/><span class="hl-0">    </span><span class="hl-6">item</span><span class="hl-0">(</span><span class="hl-3">&quot;first&quot;</span><span class="hl-0">, </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;new title&quot;</span><span class="hl-0">)),</span><br/><span class="hl-0">    </span><span class="hl-6">item</span><span class="hl-0">(</span><span class="hl-3">&quot;last&quot;</span><span class="hl-0">, </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;new title&quot;</span><span class="hl-0">))</span><br/><span class="hl-0">    </span><span class="hl-4">// mutate all items</span><br/><span class="hl-0">    </span><span class="hl-6">item</span><span class="hl-0">(</span><span class="hl-3">&#39;all&#39;</span><span class="hl-0">, </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;title&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;new title&quot;</span><span class="hl-0">))</span><br/><span class="hl-0">  ); </span><span class="hl-4">// the state will keep it as is if no todo found</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Mutating nested props</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">mutate</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&quot;cubiz&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">function</span><span class="hl-0"> </span><span class="hl-6">UserCubiz</span><span class="hl-0">({ </span><span class="hl-2">state</span><span class="hl-0">, </span><span class="hl-2">call</span><span class="hl-0"> }) {</span><br/><span class="hl-0">  </span><span class="hl-4">// initial state</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-2">id:</span><span class="hl-0"> </span><span class="hl-7">1</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">name:</span><span class="hl-0"> </span><span class="hl-3">&quot;admin&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">roles:</span><span class="hl-0"> [],</span><br/><span class="hl-0">    </span><span class="hl-2">articles:</span><span class="hl-0"> [],</span><br/><span class="hl-0">    </span><span class="hl-2">work:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-2">company:</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-2">address:</span><span class="hl-0"> {</span><br/><span class="hl-0">          </span><span class="hl-2">street:</span><span class="hl-0"> </span><span class="hl-3">&quot;&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-2">city:</span><span class="hl-0"> </span><span class="hl-3">&quot;&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">      },</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">  </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">old</span><span class="hl-0"> = </span><span class="hl-2">state</span><span class="hl-0">.</span><span class="hl-2">value</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-6">state</span><span class="hl-0">({</span><br/><span class="hl-0">    ...</span><span class="hl-2">old</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">name:</span><span class="hl-0"> </span><span class="hl-3">&quot;myname&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">roles:</span><span class="hl-0"> [...</span><span class="hl-2">old</span><span class="hl-0">.</span><span class="hl-2">roles</span><span class="hl-0">, </span><span class="hl-3">&quot;admin&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;user&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;superadmin&quot;</span><span class="hl-0">],</span><br/><span class="hl-0">    </span><span class="hl-2">articles:</span><span class="hl-0"> [...</span><span class="hl-2">old</span><span class="hl-0">.</span><span class="hl-2">articles</span><span class="hl-0">, { </span><span class="hl-2">title:</span><span class="hl-0"> </span><span class="hl-3">&quot;abc&quot;</span><span class="hl-0"> }],</span><br/><span class="hl-0">    </span><span class="hl-2">work:</span><span class="hl-0"> {</span><br/><span class="hl-0">      ...</span><span class="hl-2">old</span><span class="hl-0">.</span><span class="hl-2">work</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-2">company:</span><span class="hl-0"> {</span><br/><span class="hl-0">        ...</span><span class="hl-2">old</span><span class="hl-0">.</span><span class="hl-2">company</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-2">address:</span><span class="hl-0"> {</span><br/><span class="hl-0">          ...</span><span class="hl-2">old</span><span class="hl-0">.</span><span class="hl-2">company</span><span class="hl-0">.</span><span class="hl-2">address</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-2">street:</span><span class="hl-0"> </span><span class="hl-3">&quot;abc&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">      },</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  });</span><br/><br/><span class="hl-0">  </span><span class="hl-4">// using mutate effect</span><br/><span class="hl-0">  </span><span class="hl-6">call</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-2">mutate</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-6">set</span><span class="hl-0">(</span><span class="hl-3">&quot;name&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;myname&quot;</span><span class="hl-0">),</span><br/><span class="hl-0">    </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;roles&quot;</span><span class="hl-0">, </span><span class="hl-6">push</span><span class="hl-0">(</span><span class="hl-3">&quot;admin&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;user&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;superadmin&quot;</span><span class="hl-0">)),</span><br/><span class="hl-0">    </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;articles&quot;</span><span class="hl-0">, </span><span class="hl-6">push</span><span class="hl-0">({ </span><span class="hl-2">title:</span><span class="hl-0"> </span><span class="hl-3">&quot;abc&quot;</span><span class="hl-0"> })),</span><br/><span class="hl-0">    </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;work&quot;</span><span class="hl-0">, </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;compary&quot;</span><span class="hl-0">, </span><span class="hl-6">prop</span><span class="hl-0">(</span><span class="hl-3">&quot;address&quot;</span><span class="hl-0">, </span><span class="hl-6">set</span><span class="hl-0">(</span><span class="hl-3">&quot;street&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;abc&quot;</span><span class="hl-0">))))</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">}</span>
</code></pre>
<hr>

<a href="#api-references" id="api-references" style="color: inherit; text-decoration: none;">
  <h2>API References</h2>
</a>
<p>Please refer this link for futher information <a href="https://linq2js.github.io/cubiz/">https://linq2js.github.io/cubiz/</a></p>

<a href="#live-examples" id="live-examples" style="color: inherit; text-decoration: none;">
  <h2>Live examples</h2>
</a>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/AllEffect.html" class="tsd-kind-icon">All<wbr/>Effect</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/AllSettledEffect.html" class="tsd-kind-icon">All<wbr/>Settled<wbr/>Effect</a></li><li class="tsd-kind-interface"><a href="interfaces/Cancellable.html" class="tsd-kind-icon">Cancellable</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/CancellablePromise.html" class="tsd-kind-icon">Cancellable<wbr/>Promise</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Context.html" class="tsd-kind-icon">Context</a></li><li class="tsd-kind-interface"><a href="interfaces/CreateOptions.html" class="tsd-kind-icon">Create<wbr/>Options</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Cubiz.html" class="tsd-kind-icon">Cubiz</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/CubizCallEventArgs.html" class="tsd-kind-icon">Cubiz<wbr/>Call<wbr/>Event<wbr/>Args</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/CubizChangeEventArgs.html" class="tsd-kind-icon">Cubiz<wbr/>Change<wbr/>Event<wbr/>Args</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/CubizEventArgs.html" class="tsd-kind-icon">Cubiz<wbr/>Event<wbr/>Args</a></li><li class="tsd-kind-interface"><a href="interfaces/DebounceEffect.html" class="tsd-kind-icon">Debounce<wbr/>Effect</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Defer.html" class="tsd-kind-icon">Defer</a></li><li class="tsd-kind-interface"><a href="interfaces/DelayEffect.html" class="tsd-kind-icon">Delay<wbr/>Effect</a></li><li class="tsd-kind-interface"><a href="interfaces/Disposable.html" class="tsd-kind-icon">Disposable</a></li><li class="tsd-kind-interface"><a href="interfaces/DroppableEffect.html" class="tsd-kind-icon">Droppable<wbr/>Effect</a></li><li class="tsd-kind-interface"><a href="interfaces/Emitter.html" class="tsd-kind-icon">Emitter</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/Factory.html" class="tsd-kind-icon">Factory</a></li><li class="tsd-kind-interface"><a href="interfaces/ProviderProps.html" class="tsd-kind-icon">Provider<wbr/>Props</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/RaceEffect.html" class="tsd-kind-icon">Race<wbr/>Effect</a></li><li class="tsd-kind-interface"><a href="interfaces/Repository.html" class="tsd-kind-icon">Repository</a></li><li class="tsd-kind-interface"><a href="interfaces/SequentialEffect.html" class="tsd-kind-icon">Sequential<wbr/>Effect</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/StateAccessor.html" class="tsd-kind-icon">State<wbr/>Accessor</a></li><li class="tsd-kind-interface"><a href="interfaces/ThrottleEffect.html" class="tsd-kind-icon">Throttle<wbr/>Effect</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/UseCubiz.html" class="tsd-kind-icon">Use<wbr/>Cubiz</a></li><li class="tsd-kind-interface"><a href="interfaces/UseCubizOptions.html" class="tsd-kind-icon">Use<wbr/>Cubiz<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/WatchEffect.html" class="tsd-kind-icon">Watch<wbr/>Effect</a></li><li class="tsd-kind-interface"><a href="interfaces/WhenEffect.html" class="tsd-kind-icon">When<wbr/>Effect</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Callback" class="tsd-kind-icon">Callback</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#CubizInit" class="tsd-kind-icon">Cubiz<wbr/>Init</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Effect" class="tsd-kind-icon">Effect</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#MappingEffect" class="tsd-kind-icon">Mapping<wbr/>Effect</a></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#Mutation" class="tsd-kind-icon">Mutation</a></li><li class="tsd-kind-type-alias"><a href="modules.html#VoidCallback" class="tsd-kind-icon">Void<wbr/>Callback</a></li><li class="tsd-kind-variable"><a href="modules.html#Provider" class="tsd-kind-icon">Provider</a></li><li class="tsd-kind-variable"><a href="modules.html#all" class="tsd-kind-icon">all</a></li><li class="tsd-kind-variable"><a href="modules.html#allSettled" class="tsd-kind-icon">all<wbr/>Settled</a></li><li class="tsd-kind-variable"><a href="modules.html#debounce" class="tsd-kind-icon">debounce</a></li><li class="tsd-kind-variable"><a href="modules.html#delay" class="tsd-kind-icon">delay</a></li><li class="tsd-kind-variable"><a href="modules.html#droppable" class="tsd-kind-icon">droppable</a></li><li class="tsd-kind-variable"><a href="modules.html#race" class="tsd-kind-icon">race</a></li><li class="tsd-kind-variable"><a href="modules.html#sequential" class="tsd-kind-icon">sequential</a></li><li class="tsd-kind-variable"><a href="modules.html#throttle" class="tsd-kind-icon">throttle</a></li><li class="tsd-kind-variable"><a href="modules.html#useCubiz" class="tsd-kind-icon">use<wbr/>Cubiz</a></li><li class="tsd-kind-variable"><a href="modules.html#watch" class="tsd-kind-icon">watch</a></li><li class="tsd-kind-variable"><a href="modules.html#when" class="tsd-kind-icon">when</a></li><li class="tsd-kind-function"><a href="modules.html#add" class="tsd-kind-icon">add</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#addHandlers" class="tsd-kind-icon">add<wbr/>Handlers</a></li><li class="tsd-kind-function"><a href="modules.html#createCancellable" class="tsd-kind-icon">create<wbr/>Cancellable</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createContext" class="tsd-kind-icon">create<wbr/>Context</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createCubiz" class="tsd-kind-icon">create<wbr/>Cubiz</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createDefer" class="tsd-kind-icon">create<wbr/>Defer</a></li><li class="tsd-kind-function"><a href="modules.html#createDisposable" class="tsd-kind-icon">create<wbr/>Disposable</a></li><li class="tsd-kind-function"><a href="modules.html#createEmitter" class="tsd-kind-icon">create<wbr/>Emitter</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#createEmitterGroup" class="tsd-kind-icon">create<wbr/>Emitter<wbr/>Group</a></li><li class="tsd-kind-function"><a href="modules.html#createRepository" class="tsd-kind-icon">create<wbr/>Repository</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#exlcude" class="tsd-kind-icon">exlcude</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#insert" class="tsd-kind-icon">insert</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#item" class="tsd-kind-icon">item</a></li><li class="tsd-kind-function"><a href="modules.html#mapping" class="tsd-kind-icon">mapping</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#mutate" class="tsd-kind-icon">mutate</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#orderBy" class="tsd-kind-icon">order<wbr/>By</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#pop" class="tsd-kind-icon">pop</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#prop" class="tsd-kind-icon">prop</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#push" class="tsd-kind-icon">push</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#read" class="tsd-kind-icon">read</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#removeAll" class="tsd-kind-icon">remove<wbr/>All</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#removeAt" class="tsd-kind-icon">remove<wbr/>At</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#reverse" class="tsd-kind-icon">reverse</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#set" class="tsd-kind-icon">set</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#setAll" class="tsd-kind-icon">set<wbr/>All</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#shift" class="tsd-kind-icon">shift</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#sort" class="tsd-kind-icon">sort</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#splice" class="tsd-kind-icon">splice</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#swap" class="tsd-kind-icon">swap</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#toggle" class="tsd-kind-icon">toggle</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#unset" class="tsd-kind-icon">unset</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#unshift" class="tsd-kind-icon">unshift</a></li><li class="tsd-kind-function"><a href="modules.html#useRepository" class="tsd-kind-icon">use<wbr/>Repository</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>